# SmartPortfolio

智能投资组合管理应用 - 帮助用户管理基金/股票持仓，应用经典投资策略，提供智能调仓建议，包含完整的交易纪律检查和历史记录功能。

## 功能特性

### 核心功能

- 📊 **仪表盘** - 资产总览、今日收益、持仓分布可视化、收益归因分析
- 📈 **策略分析** - 雷达图对比当前持仓与策略目标，偏离度分析
- ⚖️ **调仓建议** - 自动生成买卖建议，调仓前后对比，交易纪律检查
- 📜 **历史记录** - 完整的调仓历史追踪，统计摘要和详情查看

### 高级功能

- 🛡️ **交易纪律检查**
  - 禁止追高：近5日涨幅>5%的资产买入时警告
  - 止盈提醒：盈利>15%的资产卖出时提示减仓
  - 黄金规则：黄金3日涨幅>6%时建议卖出而非买入
  - 右侧交易确认：买入时需确认非左侧抄底

- 📊 **收益归因分析**
  - 每只持仓的盈亏金额和百分比
  - 条形图展示正负收益分布
  - 按收益绝对值排序

- 🎨 **交互优化**
  - Toast提示（成功/错误/警告）
  - 千分位数字输入框
  - 空状态提示优化

### PWA支持

- 📱 可添加到手机主屏幕
- 📴 离线缓存支持
- 🎨 iOS/Android 原生应用体验

## 支持的投资策略

- 🛡️ 哈利·布朗永久组合 (25/25/25/25)
- 🌊 桥水全天候策略 (30/40/15/15)
- ⚖️ 四六股金平衡 (60/0/40/0)
- ✏️ 自定义策略

## 技术栈

- React 18 + TypeScript
- Vite
- Tailwind CSS
- Recharts (图表库)
- React Router (路由)
- Lucide React (图标)
- Service Worker (PWA缓存)

## 快速开始

### 前置要求

- Node.js 18+ 和 npm/pnpm/yarn

### 安装依赖

```bash
npm install
```

### 启动开发服务器

```bash
npm run dev
```

访问 http://localhost:3000 查看应用

### 构建生产版本

```bash
npm run build
```

## 项目结构

```
src/
├── components/
│   ├── layout/          # 布局组件
│   ├── dashboard/       # 仪表盘组件
│   ├── analysis/        # 分析页组件
│   ├── rebalancing/     # 调仓页组件
│   ├── history/         # 历史记录组件
│   └── common/         # 通用组件
├── pages/               # 页面组件
├── hooks/               # 自定义 Hooks
├── types/               # TypeScript 类型定义
├── utils/               # 工具函数和常量
├── App.tsx              # 路由配置
├── main.tsx             # 入口文件
└── index.css            # 全局样式
```

## 页面说明

### 仪表盘
- 显示总资产和今日收益
- 资产列表管理（添加/编辑/删除）
- 持仓展开/折叠（最多显示3条）
- 收益归因分析

### 策略分析
- 策略选择下拉菜单
- 雷达图对比当前持仓与策略目标
- 偏离度列表（按偏离度排序，最多显示3条）
- 查看调仓方案入口（固定底部）

### 调仓建议
- 调仓摘要（交易总额、偏离度改善）
- 交易纪律检查（警告/阻断）
- 买卖操作列表
- 调仓前后雷达图对比
- 确认调仓按钮（带历史保存）

### 历史记录
- 统计摘要（累计调仓次数、偏离度改善）
- 历史记录列表
- 历史详情弹窗

## 数据持久化

- 资产数据：localStorage (`smartportfolio_assets`)
- 调仓历史：localStorage (`smartportfolio_rebalance_history`)
- 自动同步，浏览器刷新后数据保留

## 注意事项

- 当前版本使用前端模拟数据计算
- 暂无后端连接
- 暂无券商API集成

## License

MIT
